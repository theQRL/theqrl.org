<div class="wrapper footer">
  <div class="grid w6 blogroll">

  </div>
</div>


<div class="wrapper footernav">
  <div class="grid collapse">
    <div class="logo">
      <a href="/">
        <img src="/assets/logo.png" alt="">
      </a>
    </div>
    <div class="menu">
      {% if page_paths %}
      <nav>
        <ul>
        {% for path in page_paths %}
          {% assign my_page = site.pages | where: "path", path | first %}
          {% if my_page.title %}
          <li><a href="{{ my_page.url | relative_url }}">{{ my_page.title | escape }}</a></li>
          {% endif %}
        {% endfor %}
        </ul>         
      </nav>
      {% endif %}

    </div>
    <div class="whitepaper">
      <nav class="click">
        <ul>
          <li><a href="">Whitepaper</a>
            <ul>
              <li><a href="">English</a></li>
              <li><a href="">Chinese</a></li>
              <li><a href="">German</a></li>
              <li><a href="">French</a></li>
              <li><a href="">Japanese</a></li>
              <li><a href="">Russian</a></li>
              <li><a href="">Spanish</a></li>
              <li><a href="">Turkish</a></li>
              <li><a href="">Vietnamese</a></li>
            </ul>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>

<script>
$(document).ready(function() {
    $(function() {
      var $content = $(".blogroll");
      var data = {
        rss_url: "https://medium.com/feed/the-quantum-resistant-ledger",
      };
      $.get("https://api.rss2json.com/v1/api.json", data, function(response) {
        if (response.status === "ok") {
          var output = "";
          $.each(response.items, function(k, item) {
            output += "<div class=\"ui card\">";
            output += "<h4 class=\"date\">" + $.format.date(item.pubDate, "dd<br>MMM") + "</h4>";
            var tagIndex = item.description.indexOf("<img"); // Find where the img tag starts
            var srcIndex = item.description.substring(tagIndex).indexOf("src=") + tagIndex; // Find where the src attribute starts
            var srcStart = srcIndex + 5; // Find where the actual image URL starts; 5 for the length of 'src="'
            var srcEnd = item.description.substring(srcStart).indexOf('"') + srcStart; // Find where the URL ends
            var src = item.description.substring(srcStart, srcEnd); // Extract just the URL
            output += "<div class=\"ui fluid image\"><a href=\"" + item.link + "\"><img src=\"" + src + "\"></a></div>";
            output += "<div class=\"content\"><a href=\"" + item.link + "\">" + item.title + "</a>";
            output += "<div class=\"author\"><span>By " + item.author + "<br><br></span></div>";

            // console.log(output);
            var yourString = item.description.replace(/<img[^>]*>/g, ""); //replace with your string.
            var html = yourString;
            var div = document.createElement("div");
            div.innerHTML = html;
            var text = div.textContent || div.innerText || "";
            yourString = text;
            var maxLength = 120; // maximum number of characters to extract
            
            //trim the string to the maximum length
            var trimmedString = yourString.substr(0, maxLength);
            // console.log(trimmedString);
            //re-trim if we are in the middle of a word
            trimmedString = trimmedString.substr(0, Math.min(trimmedString.length, trimmedString.lastIndexOf(" ")));
            output += "<p>" + trimmedString + "...</p>";
            output += "</div></div>";
            return k < 5;
          });
          $content.html(output);
        }
      });
    });
    
  });
</script>